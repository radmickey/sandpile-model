# Модель Песчаной кучи

## Введение 

[Модель песчаной кучи](https://en.wikipedia.org/wiki/Abelian_sandpile_model), консольное приложение, позволяющее сохранять свои состояния в картинку в формате BMP. 

Изначальное состояние и размер сетки задается.

Размер сетки может изменяться в процессе

Реализация - консольное приложение, поддерживающее следующие аргументы командной строки:

  **-l, --length** - длина сетки (гарантированно влезет в uint16_t)
  
  **-w, --width** - ширина сетки (гарантированно влезет в uint16_t)
  
  **-i, --input** - tsv-файл c начальными данными
  
  **-o, --output** - путь к директории, для сохранения картинок
  
  **-m, --max-iter** - максимальное количество итераций модели
  
  **-f, --freq** - частота с которой должны сохранятся картинки (если 0, то сохраняется только последнее состояние)
  
Порядок ввода аргументов не имеет значения


## Начальное состояние

Начальное состояние задается размерами сетки, переданными в качестве аргументов программы и файлом с изначальным количеством песчинок в каждой ячейке, кроме пустых.

Формат файла:
Каждая строчка содержит информацию об одной ячейке, в виде (x-координаты, y-координаты, количестве песчинок), разделенных символом табуляции. Количество песчинок гарантированно влезет в uint64_t. 

## Примечания к модели

1. Новые песчинки добавляются только при инициализации.

2. Состояние след поколения ячейки зависит только от предыдущего состояния сетки

3. В случае если песчинки обваливаются за сетку, размер сетки увеличивается на 1 в соответсвующую стороны

## Результат работы программы

Программа пересчитывает состояние модели, согласно начальным данным, а также сохраняет промежуточные состояния с заданной частотой в картинку в формате bmp.

Картинка для текущего состояния формируется по след правилам:

1. Размер картинки равен размеру поля

2. Каждый пиксель соответствует ячейке поля

3. Цвет пикселя зависит от количества песчинок в ячейке: 0 - белый, 1 - зеленый, 2 - фиолетовый, 3 - желтый, > 3 - черный.

Программа заканчивает свою работу в случае, если модель достигла стабильного состояния, либо номера итерации заданного изначально.

## Пример ввода 
1. -l=100 -w=100 -i=someName.tsv -o=./